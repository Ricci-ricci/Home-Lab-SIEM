# Wazuh Agent Enrollment on Ubuntu 24.04 (Dashboard Method)

This guide documents how I added a Wazuh agent from the Wazuh Dashboard and enrolled an Ubuntu 24.04 endpoint so it shows **Active**.

---

## Prerequisites
- Wazuh stack is installed and the **Wazuh Dashboard** is reachable.
- Ubuntu 24.04 VM/host can reach the Wazuh Manager over the lab network (IP + ports).
- You have access to the dashboard credentials (stored securely; do not commit secrets).

---

## 1) Add the agent from the Wazuh Dashboard
1. Log in to the Wazuh Dashboard.
2. Find **Add agent** (agent enrollment / deployment flow).
3. Follow the rules/steps shown by the dashboard for your environment and OS.
4. Choose **Linux / Ubuntu** when prompted and copy the enrollment commands the dashboard generates.

---

## 2) Ubuntu 24.04 special note: certificate must be `none`
On Ubuntu 24.04, enrollment may fail or the dashboard enrollment flow may behave unexpectedly unless the certificate mode is set to **none**.

- Set the certificate option to `none` in the agent enrollment/config as required by the dashboard flow.
- If **Add agent** is not showing or enrollment steps don’t appear as expected on Ubuntu 24.04, search for tutorials covering:
  - “dashboard add agent not showing ubuntu 24 wazuh”
  - and apply the relevant dashboard-side fix before retrying.

(Reason for note: Ubuntu 24.04 + the dashboard flow sometimes requires this adjustment to proceed cleanly.)

---

## 3) Install the agent on Ubuntu 24.04
1. On the Ubuntu 24.04 endpoint, run the commands generated by the dashboard “Add agent” wizard.
2. Confirm the agent service is installed and started (the wizard usually includes service enable/start steps).

---

## 4) VM/network checks (if the agent won’t enroll)
If enrollment fails or the agent never becomes active, verify:
- The Ubuntu endpoint can resolve/reach the Wazuh Manager IP.
- Your VM networking is correct (host-only/internal lab network, correct subnet, no isolation issues).
- Firewall rules aren’t blocking agent-to-manager traffic.

If you change VM networking or addressing, re-run the enrollment steps if needed.

---

## 5) Validate in the dashboard
- Return to the Wazuh Dashboard.
- Navigate to the agents list.
- You should see the Ubuntu 24.04 agent appear and become **Active** after successful enrollment.

---

## Outcome
Once enrolled correctly (including `certificate: none` on Ubuntu 24.04), the agent shows **Active** in the dashboard and starts sending telemetry.